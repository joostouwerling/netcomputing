<!DOCTYPE html>
<html lang="en">
  <head>
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">	
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Dashboard Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="../../dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="webpageStyle.css" rel="stylesheet"> 

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
	
	<nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Sport Performance Management</a>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-2 sidebar">
			<ul class="nav nav-sidebar">
            <form action = "#">
				<div  class="form-group">
					<label for="match">Match</label>
					<select class="form-control" id="selectMatch">
					</select>
				</div>
				<div class="form-group">
					<label for="player">Player</label>
					<select class="form-control" id="selectPlayer">
						<option>1</option>
						<option>2</option>
					</select>
				</div>	
				 <button type="submit" class="btn btn-default">GO</button>
			</form>
			</ul>
        </div> 		
      </div>
    </div>
	<div id = "map"> > </div>
	
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript">
	var matches = []; 	
		function loadMatches() {
			var i;
			jQuery.getJSON( "http://webservice.sportperformancemanagement.eu:8080/Webservice/rest/matches", function( data ) {
				for(i = 0; i < data.length; i++){
					matches[i] = data[i];
					console.log(data[i].id);
					$("#selectMatch").append($("<option></option>").val(data[i].id).html(data[i].name));
				}
			});
			 loadHeatMap();
		}
		
		var map, heatmap;
		
		function loadHeatMap() {
			var sumLat = 0; 
			var sumLng = 0;
			jQuery.getJSON( "http://webservice.sportperformancemanagement.eu:8080/Webservice/rest/locations", function( data ) {
				var points = [];
				for(i = 0; i < data.length; i++) { 
					sumLat += data[i].lat;
					sumLng += data[i].lng;	
					points.push(new google.maps.LatLng(data[i].lat,data[i].lng));
			}
				loadMap(points, sumLat, sumLng);
			});	
		}
		
		function loadMap(points, sumLat, sumLng) {
			var i; 
			var avgLat = sumLat / points.length; 
			var avgLng = sumLng / points.length; 
			
			map = new google.maps.Map(document.getElementById('map'), {
				  zoom: 17,
				  center: {	lat: avgLat, lng: avgLng},
				  mapTypeId: google.maps.MapTypeId.SATELLITE
				});
			heatmap = new google.maps.visualization.HeatmapLayer({
				  data: points,
				  map: map
				});
		}
		</script>

		<script async defer
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCGePtTEBjsvrA_nHKS8hkxXfMv48C9czM&libraries=visualization&callback=loadMatches">
		</script>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="../../assets/js/vendor/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
